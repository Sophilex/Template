# 容斥原理

设$S$是一个有限集，$A_1,A_2...A_n是S的n个子集$，则

$|S-\bigcup_{i=1}^{n}A_i|=\sum_{i=0}^{n}(-1)^i\sum_{1\leq j_1< j_2...<j_i \leq n}|\bigcap_{k=1}^{i}A_{j_k}|$

## 基本应用：

---

m件不同的物品，分给n个人，要求每一个人至少分得一件物品，求不同的分配方案数

令$A_i$表示第i个人没有物品，S表示m个物品分给n个人的总方案数

则$|S-\bigcup_{i=1}^{n}A_i|=\sum_{i=0}^{n}(-1)^i\sum_{1\leq j_1< j_2...<j_i\leq n}|\bigcap_{k=1}^{i}A_{j_k}|$

$=\sum_{i=0}^{n}(-1)^i\binom{n}{i}(n-i)^m$

---

有 $2n 个元素 a_1,a_2, ...,a_n 和 b_1,b_2, ...,b_n$，求有多少个它们的全排列，满足任意的

$1 ≤i≤n， a_i 和 b_i$ 都不相邻。

同样的，令$A_i$表示$a_i和b_i$相邻，

则$|S-\bigcup_{i=1}^{n}A_i|=\sum_{i=0}^{n}(-1)^i\sum_{1\leq j_1< j_2...j_i \leq n}|\bigcap_{k=1}^{i}A_{j_k}|$

$=\sum_{i=0}^{n}(-1)^i\binom{n}{i}|有i对相邻的方案数|$

$=\sum_{i=0}^{n}(-1)^i\binom{n}{i}2^i*(2n-i)!$

---

## 符号形式



## 二项式反演





